{% extends "base.html" %}

{% block title %}Личный кабинет | NutriCoreIQ{% endblock %}

{% block extra_head %}{% endblock %}

{% block content %}
<div class="container">
    <div id="profile-error" class="alert alert-danger mt-3 d-none"></div>
    <div id="profile-success" class="alert alert-success mt-3 d-none"></div>
    <div class="profile-card">
        <div class="profile-header">
            <div class="profile-avatar">
                {{ user.username[0]|upper }}
            </div>
            <div class="profile-info">
                <h2>{{ user.username }}</h2>
                <p class="text-muted">{{ user.email }}</p>
            </div>
        </div>

        <div class="profile-details">
            <div class="detail-card">
                <h4>Основная информация</h4>
                <div class="detail-item">
                    <strong>Пол:</strong>
                    <span id="gender-field">{{ user.gender|default('Не указан', true) }}</span>
                </div>
                <div class="detail-item">
                    <strong>Возраст:</strong>
                    <span id="age-field">{{ user.age|default('Не указан', true) }}</span>
                </div>
            </div>

            <div class="detail-card">
                <h4>Физические параметры</h4>
                <div class="detail-item">
                    <strong>Рост:</strong>
                    <span id="height-field">
                        {% if user.height is not none %}{{ user.height }} см{% else %}Не указан{% endif %}
                    </span>
                </div>
                <div class="detail-item">
                    <strong>Вес:</strong>
                    <span id="weight-field">
                        {% if user.weight is not none %}{{ user.weight }} кг{% else %}Не указан{% endif %}
                    </span>
                </div>
            </div>

            <div class="detail-card">
                <h4>Статистика</h4>
                <div class="detail-item">
                    <strong>Дата регистрации:</strong>
                    <span>
                        {% if user.created_at %}
                            {{ user.created_at[:10]|replace('-', '.') }} {{ user.created_at[11:16] }}
                        {% else %}
                            Неизвестно
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <a href="/api/v1/user/profile/update" class="btn btn-primary">
                <i class="bi bi-pencil"></i> Редактировать профиль
            </a>
            <a href="/api/v1/user/password/change" class="btn btn-outline-secondary">
                <i class="bi bi-shield-lock"></i> Сменить пароль
            </a>
        </div>
    </div>

    <!-- Дополнительные разделы могут быть добавлены здесь -->
</div>
{% endblock %}

{% block scripts %}
<script nonce="{{ csp_nonce }}"></script>
{% endblock %}